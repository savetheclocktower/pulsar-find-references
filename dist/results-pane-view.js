"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const atom_1 = require("atom");
const etch_1 = __importDefault(require("etch"));
class ResultsPaneView {
    constructor() {
        this.isLoading = false;
        this.subscriptions = new atom_1.CompositeDisposable();
        etch_1.default.initialize(this);
    }
    update() {
    }
    destroy() {
        this.subscriptions.dispose();
    }
    render() {
        var _a;
        return ($.div({ tabIndex: -1, className: `preview-pane pane-item ${matchCount === 0 ? 'no-results' : ''}` }, $.div({ className: 'preview-header' }, $.span({
            ref: 'previewCount',
            className: 'preview-count inline-block',
            innerHTML: (_a = getSearchResultsMessage()) !== null && _a !== void 0 ? _a : 'Project search results'
        }), $.button({
            ref: 'dontOverrideTab',
            style: { display: matchCount === 0 || this.isLoading ? 'none' : '' },
            className: 'btn'
        }, `Don’t override this tab`), $.div({
            ref: 'previewControls',
            className: 'preview-controls',
            style: { display: matchCount === 0 ? '' : 'none' },
        }, this.searchContextLineCountBefore > 0 ?
            $.div({ className: 'btn-group' }, $.button({
                ref: 'decrementLeadingContextLines',
                className: 'btn'
            }, '–'), $.button({
                ref: 'toggleLeadingContextLines',
                className: 'btn'
            }, $.svg({
                className: 'icon',
                innerHTML: '<use xlink:href="#find-and-replace-context-lines-before" />'
            })), $.button({
                ref: 'incrementLeadingContextLines',
                className: 'btn'
            }, '+')) : null, this.searchContextLineCountAfter > 0 ?
            $.div({ className: 'btn-group' }, $.button({
                ref: 'decrementTrailingContextLines',
                className: 'btn'
            }, '–'), $.button({
                ref: 'toggleTrailingContextLines',
                className: 'btn'
            }, $.svg({
                className: 'icon',
                innerHTML: '<use xlink:href="#find-and-replace-context-lines-after" />'
            })), $.button({
                ref: 'incrementTrailingContextLines',
                className: 'btn' + (this.model.getFindOptions().trailingContextLineCount >= this.searchContextLineCountAfter ? ' disabled' : '')
            }, '+')) : null, $.div({ className: 'btn-group' }, $.button({ ref: 'collapseAll', className: 'btn' }, 'Collapse All'), $.button({ ref: 'expandAll', className: 'btn' }, 'Expand All'))), $.div({ className: 'inline-block', style: showIf(this.isLoading) }, $.div({ className: 'loading loading-spinner-tiny inline-block' }), $.div({
            className: 'inline-block',
            style: showIf(this.isLoading)
        }), $.span({ ref: 'searchedCount', className: 'searched-count' }, '0'), $.span({}, ' paths searched')))),
            $.ul({
                ref: 'errorList',
                className: 'error-list list-group padded',
                style: showIf(this.searchErrors.length > 0)
            }, ...this.searchErrors.map(message => ($.li({ className: 'text-error' }, escapeHtml(message))))),
            etch_1.default.dom(ResultsView, { ref: 'resultsView', model: this.model }),
            $.ul({
                className: 'centered background-message no-results-overlay',
                style: showIf(matchCount === 0)
            }, $.li({}, 'No results')));
    }
    copy() {
        return new ResultsPaneView();
    }
    getTitle() {
        return 'Find References Results';
    }
    getIconName() {
        return 'search';
    }
    getURI() {
        return ResultsPaneView.URI;
    }
    focus() {
        var _a;
        (_a = this.refs.resultsView) === null || _a === void 0 ? void 0 : _a.element.focus();
    }
}
ResultsPaneView.URI = "atom://pulsar-find-references/results";
exports.default = ResultsPaneView;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzdWx0cy1wYW5lLXZpZXcuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9saWIvcmVzdWx0cy1wYW5lLXZpZXcudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQ0EsK0JBQTJDO0FBQzNDLGdEQUF3QjtBQUV4QixNQUFxQixlQUFlO0lBV2xDO1FBUFUsY0FBUyxHQUFZLEtBQUssQ0FBQztRQUU3QixrQkFBYSxHQUF3QixJQUFJLDBCQUFtQixFQUFFLENBQUM7UUFNckUsY0FBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN4QixDQUFDO0lBRUQsTUFBTTtJQUVOLENBQUM7SUFFRCxPQUFPO1FBQ0wsSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUMvQixDQUFDO0lBRUQsTUFBTTs7UUFFSixPQUFPLENBQ0wsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUMsRUFBRSxTQUFTLEVBQUUsMEJBQTBCLFVBQVUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFDakcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLFNBQVMsRUFBRSxnQkFBZ0IsRUFBRSxFQUNuQyxDQUFDLENBQUMsSUFBSSxDQUFDO1lBQ0wsR0FBRyxFQUFFLGNBQWM7WUFDbkIsU0FBUyxFQUFFLDRCQUE0QjtZQUN2QyxTQUFTLEVBQUUsTUFBQSx1QkFBdUIsRUFBRSxtQ0FBSSx3QkFBd0I7U0FDakUsQ0FBQyxFQUVGLENBQUMsQ0FBQyxNQUFNLENBQUM7WUFDUCxHQUFHLEVBQUUsaUJBQWlCO1lBQ3RCLEtBQUssRUFBRSxFQUFDLE9BQU8sRUFBRSxVQUFVLEtBQUssQ0FBQyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFDO1lBQ2xFLFNBQVMsRUFBRSxLQUFLO1NBQ2pCLEVB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QUN6QyxDQUFDOztBQTdLTSxtQkFBRyxHQUFHLHVDQUF1QyxBQUExQyxDQUEyQztrQkFGbEMsZUFBZSIsInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IHsgQ29tcG9zaXRlRGlzcG9zYWJsZSB9IGZyb20gJ2F0b20nO1xuaW1wb3J0IGV0Y2ggZnJvbSAnZXRjaCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlc3VsdHNQYW5lVmlldyB7XG5cbiAgc3RhdGljIFVSSSA9IFwiYXRvbTovL3B1bHNhci1maW5kLXJlZmVyZW5jZXMvcmVzdWx0c1wiO1xuXG4gIHByb3RlY3RlZCBpc0xvYWRpbmc6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwcml2YXRlIHN1YnNjcmlwdGlvbnM6IENvbXBvc2l0ZURpc3Bvc2FibGUgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuXG4gIHB1YmxpYyBlbGVtZW50ITogSFRNTEVsZW1lbnQ7XG4gIHB1YmxpYyByZWZzITogeyBba2V5OiBzdHJpbmddOiBIVE1MRWxlbWVudCB9O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGV0Y2guaW5pdGlhbGl6ZSh0aGlzKTtcbiAgfVxuXG4gIHVwZGF0ZSgpIHtcblxuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMuZGlzcG9zZSgpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuXG4gICAgcmV0dXJuIChcbiAgICAgICQuZGl2KHsgdGFiSW5kZXg6IC0xLCBjbGFzc05hbWU6IGBwcmV2aWV3LXBhbmUgcGFuZS1pdGVtICR7bWF0Y2hDb3VudCA9PT0gMCA/ICduby1yZXN1bHRzJyA6ICcnfWAgfSxcbiAgICAgICAgJC5kaXYoeyBjbGFzc05hbWU6ICdwcmV2aWV3LWhlYWRlcicgfSxcbiAgICAgICAgICAkLnNwYW4oe1xuICAgICAgICAgICAgcmVmOiAncHJldmlld0NvdW50JyxcbiAgICAgICAgICAgIGNsYXNzTmFtZTogJ3ByZXZpZXctY291bnQgaW5saW5lLWJsb2NrJyxcbiAgICAgICAgICAgIGlubmVySFRNTDogZ2V0U2VhcmNoUmVzdWx0c01lc3NhZ2UoKSA/PyAnUHJvamVjdCBzZWFyY2ggcmVzdWx0cydcbiAgICAgICAgICB9KSxcblxuICAgICAgICAgICQuYnV0dG9uKHtcbiAgICAgICAgICAgIHJlZjogJ2RvbnRPdmVycmlkZVRhYicsXG4gICAgICAgICAgICBzdHlsZToge2Rpc3BsYXk6IG1hdGNoQ291bnQgPT09IDAgfHwgdGhpcy5pc0xvYWRpbmcgPyAnbm9uZScgOiAnJ30sXG4gICAgICAgICAgICBjbGFzc05hbWU6ICdidG4nXG4gICAgICAgICAgfSwgYERvbuKAmXQgb3ZlcnJpZGUgdGhpcyB0YWJgKSxcblxuICAgICAgICAgICQuZGl2KFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICByZWY6ICdwcmV2aWV3Q29udHJvbHMnLFxuICAgICAgICAgICAgICBjbGFzc05hbWU6ICdwcmV2aWV3LWNvbnRyb2xzJyxcbiAgICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OiBtYXRjaENvdW50ID09PSAwID8gJycgOiAnbm9uZSd9LFxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgdGhpcy5zZWFyY2hDb250ZXh0TGluZUNvdW50QmVmb3JlID4gMCA/XG4gICAgICAgICAgICAgICQuZGl2KHsgY2xhc3NOYW1lOiAnYnRuLWdyb3VwJyB9LFxuICAgICAgICAgICAgICAgICQuYnV0dG9uKFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZWY6ICdkZWNyZW1lbnRMZWFkaW5nQ29udGV4dExpbmVzJyxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnRuJ1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICfigJMnXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAkLmJ1dHRvbihcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVmOiAndG9nZ2xlTGVhZGluZ0NvbnRleHRMaW5lcycsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2J0bidcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAkLnN2ZyhcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2ljb24nLFxuICAgICAgICAgICAgICAgICAgICAgIGlubmVySFRNTDogJzx1c2UgeGxpbms6aHJlZj1cIiNmaW5kLWFuZC1yZXBsYWNlLWNvbnRleHQtbGluZXMtYmVmb3JlXCIgLz4nXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICQuYnV0dG9uKFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZWY6ICdpbmNyZW1lbnRMZWFkaW5nQ29udGV4dExpbmVzJyxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnRuJ1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICcrJ1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKSA6IG51bGwsXG5cbiAgICAgICAgICAgIHRoaXMuc2VhcmNoQ29udGV4dExpbmVDb3VudEFmdGVyID4gMCA/XG4gICAgICAgICAgICAgICQuZGl2KHsgY2xhc3NOYW1lOiAnYnRuLWdyb3VwJyB9LFxuICAgICAgICAgICAgICAgICQuYnV0dG9uKFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZWY6ICdkZWNyZW1lbnRUcmFpbGluZ0NvbnRleHRMaW5lcycsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2J0bidcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAn4oCTJ1xuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgJC5idXR0b24oXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ3RvZ2dsZVRyYWlsaW5nQ29udGV4dExpbmVzJyxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnRuJ1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICQuc3ZnKFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnaWNvbicsXG4gICAgICAgICAgICAgICAgICAgICAgaW5uZXJIVE1MOiAnPHVzZSB4bGluazpocmVmPVwiI2ZpbmQtYW5kLXJlcGxhY2UtY29udGV4dC1saW5lcy1hZnRlclwiIC8+J1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAkLmJ1dHRvbihcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5jcmVtZW50VHJhaWxpbmdDb250ZXh0TGluZXMnLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdidG4nICsgKHRoaXMubW9kZWwuZ2V0RmluZE9wdGlvbnMoKS50cmFpbGluZ0NvbnRleHRMaW5lQ291bnQgPj0gdGhpcy5zZWFyY2hDb250ZXh0TGluZUNvdW50QWZ0ZXIgPyAnIGRpc2FibGVkJyA6ICcnKVxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICcrJ1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKSA6IG51bGwsXG4gICAgICAgICAgICAkLmRpdih7IGNsYXNzTmFtZTogJ2J0bi1ncm91cCcgfSxcbiAgICAgICAgICAgICAgJC5idXR0b24oe3JlZjogJ2NvbGxhcHNlQWxsJywgY2xhc3NOYW1lOiAnYnRuJ30sICdDb2xsYXBzZSBBbGwnKSxcbiAgICAgICAgICAgICAgJC5idXR0b24oe3JlZjogJ2V4cGFuZEFsbCcsIGNsYXNzTmFtZTogJ2J0bid9LCAnRXhwYW5kIEFsbCcpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSxcblxuICAgICAgICAgICQuZGl2KHsgY2xhc3NOYW1lOiAnaW5saW5lLWJsb2NrJywgc3R5bGU6IHNob3dJZih0aGlzLmlzTG9hZGluZykgfSxcbiAgICAgICAgICAgICQuZGl2KHsgY2xhc3NOYW1lOiAnbG9hZGluZyBsb2FkaW5nLXNwaW5uZXItdGlueSBpbmxpbmUtYmxvY2snIH0pLFxuXG4gICAgICAgICAgICAkLmRpdihcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2lubGluZS1ibG9jaycsXG4gICAgICAgICAgICAgICAgc3R5bGU6IHNob3dJZih0aGlzLmlzTG9hZGluZylcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKSxcblxuICAgICAgICAgICAgJC5zcGFuKHtyZWY6ICdzZWFyY2hlZENvdW50JywgY2xhc3NOYW1lOiAnc2VhcmNoZWQtY291bnQnfSxcbiAgICAgICAgICAgICAgJzAnXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgJC5zcGFuKHt9LCAnIHBhdGhzIHNlYXJjaGVkJylcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICksXG5cbiAgICAgICQudWwoXG4gICAgICAgIHtcbiAgICAgICAgICByZWY6ICdlcnJvckxpc3QnLFxuICAgICAgICAgIGNsYXNzTmFtZTogJ2Vycm9yLWxpc3QgbGlzdC1ncm91cCBwYWRkZWQnLFxuICAgICAgICAgIHN0eWxlOiBzaG93SWYodGhpcy5zZWFyY2hFcnJvcnMubGVuZ3RoID4gMClcbiAgICAgICAgfSxcblxuICAgICAgICAuLi50aGlzLnNlYXJjaEVycm9ycy5tYXAobWVzc2FnZSA9PiAoXG4gICAgICAgICAgJC5saSh7IGNsYXNzTmFtZTogJ3RleHQtZXJyb3InIH0sIGVzY2FwZUh0bWwobWVzc2FnZSkpXG4gICAgICAgICkpXG4gICAgICApLFxuXG4gICAgICBldGNoLmRvbShcbiAgICAgICAgUmVzdWx0c1ZpZXcsXG4gICAgICAgIHsgcmVmOiAncmVzdWx0c1ZpZXcnLCBtb2RlbDogdGhpcy5tb2RlbCB9XG4gICAgICApLFxuXG4gICAgICAkLnVsKFxuICAgICAgICB7XG4gICAgICAgICAgY2xhc3NOYW1lOiAnY2VudGVyZWQgYmFja2dyb3VuZC1tZXNzYWdlIG5vLXJlc3VsdHMtb3ZlcmxheScsXG4gICAgICAgICAgc3R5bGU6IHNob3dJZihtYXRjaENvdW50ID09PSAwKVxuICAgICAgICB9LFxuICAgICAgICAkLmxpKHt9LCAnTm8gcmVzdWx0cycpXG4gICAgICApXG4gICAgKTtcbiAgfVxuXG4gIGNvcHkoKSB7XG4gICAgcmV0dXJuIG5ldyBSZXN1bHRzUGFuZVZpZXcoKTtcbiAgfVxuXG4gIGdldFRpdGxlKCkge1xuICAgIHJldHVybiAnRmluZCBSZWZlcmVuY2VzIFJlc3VsdHMnO1xuICB9XG5cbiAgZ2V0SWNvbk5hbWUoKSB7XG4gICAgcmV0dXJuICdzZWFyY2gnO1xuICB9XG5cbiAgZ2V0VVJJKCkge1xuICAgIHJldHVybiBSZXN1bHRzUGFuZVZpZXcuVVJJO1xuICB9XG5cbiAgZm9jdXMoKSB7XG4gICAgdGhpcy5yZWZzLnJlc3VsdHNWaWV3Py5lbGVtZW50LmZvY3VzKCk7XG4gIH1cblxuXG5cbn1cbiJdfQ==