"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const atom_1 = require("atom");
const etch_1 = __importDefault(require("etch"));
const $ = etch_1.default.dom;
class ResultsPaneView {
    constructor() {
        this.isLoading = false;
        this.subscriptions = new atom_1.CompositeDisposable();
        this.subscriptions.add(atom.config.observe('pulsar-find-references.resultsView.searchContextLineCountBefore', this.searchContextLineCountChanged.bind(this)), atom.config.observe('pulsar-find-references.resultsView.searchContextLineCountAfter', this.searchContextLineCountChanged.bind(this)));
    }
    update() {
    }
    destroy() {
        this.subscriptions.dispose();
    }
    render() {
        var _a, _b;
        let matchCount = (_a = this.searchResults) === null || _a === void 0 ? void 0 : _a.matchCount;
        return ($.div({ tabIndex: -1, className: `preview-pane pane-item ${matchCount === 0 ? 'no-results' : ''}` }, $.div({ className: 'preview-header' }, $.span({
            ref: 'previewCount',
            className: 'preview-count inline-block',
            innerHTML: (_b = getSearchResultsMessage()) !== null && _b !== void 0 ? _b : 'Project search results'
        }), $.button({
            ref: 'dontOverrideTab',
            style: { display: matchCount === 0 || this.isLoading ? 'none' : '' },
            className: 'btn'
        }, `Don’t override this tab`), $.div({
            ref: 'previewControls',
            className: 'preview-controls',
            style: { display: matchCount === 0 ? '' : 'none' },
        }, this.searchContextLineCountBefore > 0 ?
            $.div({ className: 'btn-group' }, $.button({
                ref: 'decrementLeadingContextLines',
                className: 'btn'
            }, '–'), $.button({
                ref: 'toggleLeadingContextLines',
                className: 'btn'
            }, $.svg({
                className: 'icon',
                innerHTML: '<use xlink:href="#find-and-replace-context-lines-before" />'
            })), $.button({
                ref: 'incrementLeadingContextLines',
                className: 'btn'
            }, '+')) : null, this.searchContextLineCountAfter > 0 ?
            $.div({ className: 'btn-group' }, $.button({
                ref: 'decrementTrailingContextLines',
                className: 'btn'
            }, '–'), $.button({
                ref: 'toggleTrailingContextLines',
                className: 'btn'
            }, $.svg({
                className: 'icon',
                innerHTML: '<use xlink:href="#find-and-replace-context-lines-after" />'
            })), $.button({
                ref: 'incrementTrailingContextLines',
                className: 'btn' + (this.model.getFindOptions().trailingContextLineCount >= this.searchContextLineCountAfter ? ' disabled' : '')
            }, '+')) : null, $.div({ className: 'btn-group' }, $.button({ ref: 'collapseAll', className: 'btn' }, 'Collapse All'), $.button({ ref: 'expandAll', className: 'btn' }, 'Expand All'))), $.div({ className: 'inline-block', style: showIf(this.isLoading) }, $.div({ className: 'loading loading-spinner-tiny inline-block' }), $.div({
            className: 'inline-block',
            style: showIf(this.isLoading)
        }), $.span({ ref: 'searchedCount', className: 'searched-count' }, '0'), $.span({}, ' paths searched')))),
            $.ul({
                ref: 'errorList',
                className: 'error-list list-group padded',
                style: showIf(this.searchErrors.length > 0)
            }, ...this.searchErrors.map(message => ($.li({ className: 'text-error' }, escapeHtml(message))))),
            etch_1.default.dom(ResultsView, { ref: 'resultsView', model: this.model }),
            $.ul({
                className: 'centered background-message no-results-overlay',
                style: showIf(matchCount === 0)
            }, $.li({}, 'No results')));
    }
    copy() {
        return new ResultsPaneView();
    }
    getTitle() {
        return 'Find References Results';
    }
    getIconName() {
        return 'search';
    }
    getURI() {
        return ResultsPaneView.URI;
    }
    focus() {
        var _a;
        (_a = this.refs.resultsView) === null || _a === void 0 ? void 0 : _a.element.focus();
    }
}
ResultsPaneView.URI = "atom://pulsar-find-references/results";
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzdWx0cy1wYW5lbC12aWV3LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vbGliL3Jlc3VsdHMtcGFuZWwtdmlldy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUNBLCtCQUEyQztBQUMzQyxnREFBd0I7QUFFeEIsTUFBTSxDQUFDLEdBQUcsY0FBSSxDQUFDLEdBQUcsQ0FBQztBQUVuQixNQUFNLGVBQWU7SUFPbkI7UUFKVSxjQUFTLEdBQVksS0FBSyxDQUFDO1FBRTdCLGtCQUFhLEdBQXdCLElBQUksMEJBQW1CLEVBQUUsQ0FBQztRQUlyRSxJQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FDcEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQ2pCLGlFQUFpRSxFQUNqRSxJQUFJLENBQUMsNkJBQTZCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUM5QyxFQUNELElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUNqQixnRUFBZ0UsRUFDaEUsSUFBSSxDQUFDLDZCQUE2QixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FDOUMsQ0FDRixDQUFDO0lBQ0osQ0FBQztJQUVELE1BQU07SUFFTixDQUFDO0lBRUQsT0FBTztRQUNMLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDL0IsQ0FBQztJQUVELE1BQU07O1FBQ0osSUFBSSxVQUFVLEdBQUcsTUFBQSxJQUFJLENBQUMsYUFBYSwwQ0FBRSxVQUFVLENBQUM7UUFFaEQsT0FBTyxDQUNMLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDLEVBQUUsU0FBUyxFQUFFLDBCQUEwQixVQUFVLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQ2pHLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxTQUFTLEVBQUUsZ0JBQWdCLEVBQUUsRUFDbkMsQ0FBQyxDQUFDLElBQUks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QyxDQUN2QixDQUNGLENBQUM7SUFDSixDQUFDO0lBRUQsSUFBSTtRQUNGLE9BQU8sSUFBSSxlQUFlLEVBQUUsQ0FBQztJQUMvQixDQUFDO0lBRUQsUUFBUTtRQUNOLE9BQU8seUJBQXlCLENBQUM7SUFDbkMsQ0FBQztJQUVELFdBQVc7UUFDVCxPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0lBRUQsTUFBTTtRQUNKLE9BQU8sZUFBZSxDQUFDLEdBQUcsQ0FBQztJQUM3QixDQUFDO0lBRUQsS0FBSzs7UUFDSCxNQUFBLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVywwQ0FBRSxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDekMsQ0FBQzs7QUFyTE0sbUJBQUcsR0FBRyx1Q0FBdUMsQUFBMUMsQ0FBMkMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCB7IENvbXBvc2l0ZURpc3Bvc2FibGUgfSBmcm9tICdhdG9tJztcbmltcG9ydCBldGNoIGZyb20gJ2V0Y2gnO1xuXG5jb25zdCAkID0gZXRjaC5kb207XG5cbmNsYXNzIFJlc3VsdHNQYW5lVmlldyB7XG4gIHN0YXRpYyBVUkkgPSBcImF0b206Ly9wdWxzYXItZmluZC1yZWZlcmVuY2VzL3Jlc3VsdHNcIjtcblxuICBwcm90ZWN0ZWQgaXNMb2FkaW5nOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBzdWJzY3JpcHRpb25zOiBDb21wb3NpdGVEaXNwb3NhYmxlID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKTtcblxuICBjb25zdHJ1Y3RvcigpIHtcblxuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5hZGQoXG4gICAgICBhdG9tLmNvbmZpZy5vYnNlcnZlKFxuICAgICAgICAncHVsc2FyLWZpbmQtcmVmZXJlbmNlcy5yZXN1bHRzVmlldy5zZWFyY2hDb250ZXh0TGluZUNvdW50QmVmb3JlJyxcbiAgICAgICAgdGhpcy5zZWFyY2hDb250ZXh0TGluZUNvdW50Q2hhbmdlZC5iaW5kKHRoaXMpXG4gICAgICApLFxuICAgICAgYXRvbS5jb25maWcub2JzZXJ2ZShcbiAgICAgICAgJ3B1bHNhci1maW5kLXJlZmVyZW5jZXMucmVzdWx0c1ZpZXcuc2VhcmNoQ29udGV4dExpbmVDb3VudEFmdGVyJyxcbiAgICAgICAgdGhpcy5zZWFyY2hDb250ZXh0TGluZUNvdW50Q2hhbmdlZC5iaW5kKHRoaXMpXG4gICAgICApLFxuICAgICk7XG4gIH1cblxuICB1cGRhdGUoKSB7XG5cbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLmRpc3Bvc2UoKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBsZXQgbWF0Y2hDb3VudCA9IHRoaXMuc2VhcmNoUmVzdWx0cz8ubWF0Y2hDb3VudDtcblxuICAgIHJldHVybiAoXG4gICAgICAkLmRpdih7IHRhYkluZGV4OiAtMSwgY2xhc3NOYW1lOiBgcHJldmlldy1wYW5lIHBhbmUtaXRlbSAke21hdGNoQ291bnQgPT09IDAgPyAnbm8tcmVzdWx0cycgOiAnJ31gIH0sXG4gICAgICAgICQuZGl2KHsgY2xhc3NOYW1lOiAncHJldmlldy1oZWFkZXInIH0sXG4gICAgICAgICAgJC5zcGFuKHtcbiAgICAgICAgICAgIHJlZjogJ3ByZXZpZXdDb3VudCcsXG4gICAgICAgICAgICBjbGFzc05hbWU6ICdwcmV2aWV3LWNvdW50IGlubGluZS1ibG9jaycsXG4gICAgICAgICAgICBpbm5lckhUTUw6IGdldFNlYXJjaFJlc3VsdHNNZXNzYWdlKCkgPz8gJ1Byb2plY3Qgc2VhcmNoIHJlc3VsdHMnXG4gICAgICAgICAgfSksXG5cbiAgICAgICAgICAkLmJ1dHRvbih7XG4gICAgICAgICAgICByZWY6ICdkb250T3ZlcnJpZGVUYWInLFxuICAgICAgICAgICAgc3R5bGU6IHtkaXNwbGF5OiBtYXRjaENvdW50ID09PSAwIHx8IHRoaXMuaXNMb2FkaW5nID8gJ25vbmUnIDogJyd9LFxuICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnRuJ1xuICAgICAgICAgIH0sIGBEb27igJl0IG92ZXJyaWRlIHRoaXMgdGFiYCksXG5cbiAgICAgICAgICAkLmRpdihcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgcmVmOiAncHJldmlld0NvbnRyb2xzJyxcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncHJldmlldy1jb250cm9scycsXG4gICAgICAgICAgICAgIHN0eWxlOiB7ZGlzcGxheTogbWF0Y2hDb3VudCA9PT0gMCA/ICcnIDogJ25vbmUnfSxcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHRoaXMuc2VhcmNoQ29udGV4dExpbmVDb3VudEJlZm9yZSA+IDAgP1xuICAgICAgICAgICAgICAkLmRpdih7IGNsYXNzTmFtZTogJ2J0bi1ncm91cCcgfSxcbiAgICAgICAgICAgICAgICAkLmJ1dHRvbihcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVmOiAnZGVjcmVtZW50TGVhZGluZ0NvbnRleHRMaW5lcycsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2J0bidcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAn4oCTJ1xuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgJC5idXR0b24oXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ3RvZ2dsZUxlYWRpbmdDb250ZXh0TGluZXMnLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdidG4nXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgJC5zdmcoXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdpY29uJyxcbiAgICAgICAgICAgICAgICAgICAgICBpbm5lckhUTUw6ICc8dXNlIHhsaW5rOmhyZWY9XCIjZmluZC1hbmQtcmVwbGFjZS1jb250ZXh0LWxpbmVzLWJlZm9yZVwiIC8+J1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAkLmJ1dHRvbihcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVmOiAnaW5jcmVtZW50TGVhZGluZ0NvbnRleHRMaW5lcycsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2J0bidcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAnKydcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICkgOiBudWxsLFxuXG4gICAgICAgICAgICB0aGlzLnNlYXJjaENvbnRleHRMaW5lQ291bnRBZnRlciA+IDAgP1xuICAgICAgICAgICAgICAkLmRpdih7IGNsYXNzTmFtZTogJ2J0bi1ncm91cCcgfSxcbiAgICAgICAgICAgICAgICAkLmJ1dHRvbihcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVmOiAnZGVjcmVtZW50VHJhaWxpbmdDb250ZXh0TGluZXMnLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdidG4nXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgJ+KAkydcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICQuYnV0dG9uKFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZWY6ICd0b2dnbGVUcmFpbGluZ0NvbnRleHRMaW5lcycsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2J0bidcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAkLnN2ZyhcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2ljb24nLFxuICAgICAgICAgICAgICAgICAgICAgIGlubmVySFRNTDogJzx1c2UgeGxpbms6aHJlZj1cIiNmaW5kLWFuZC1yZXBsYWNlLWNvbnRleHQtbGluZXMtYWZ0ZXJcIiAvPidcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgJC5idXR0b24oXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ2luY3JlbWVudFRyYWlsaW5nQ29udGV4dExpbmVzJyxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnRuJyArICh0aGlzLm1vZGVsLmdldEZpbmRPcHRpb25zKCkudHJhaWxpbmdDb250ZXh0TGluZUNvdW50ID49IHRoaXMuc2VhcmNoQ29udGV4dExpbmVDb3VudEFmdGVyID8gJyBkaXNhYmxlZCcgOiAnJylcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAnKydcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICkgOiBudWxsLFxuICAgICAgICAgICAgJC5kaXYoeyBjbGFzc05hbWU6ICdidG4tZ3JvdXAnIH0sXG4gICAgICAgICAgICAgICQuYnV0dG9uKHtyZWY6ICdjb2xsYXBzZUFsbCcsIGNsYXNzTmFtZTogJ2J0bid9LCAnQ29sbGFwc2UgQWxsJyksXG4gICAgICAgICAgICAgICQuYnV0dG9uKHtyZWY6ICdleHBhbmRBbGwnLCBjbGFzc05hbWU6ICdidG4nfSwgJ0V4cGFuZCBBbGwnKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICksXG5cbiAgICAgICAgICAkLmRpdih7IGNsYXNzTmFtZTogJ2lubGluZS1ibG9jaycsIHN0eWxlOiBzaG93SWYodGhpcy5pc0xvYWRpbmcpIH0sXG4gICAgICAgICAgICAkLmRpdih7IGNsYXNzTmFtZTogJ2xvYWRpbmcgbG9hZGluZy1zcGlubmVyLXRpbnkgaW5saW5lLWJsb2NrJyB9KSxcblxuICAgICAgICAgICAgJC5kaXYoXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdpbmxpbmUtYmxvY2snLFxuICAgICAgICAgICAgICAgIHN0eWxlOiBzaG93SWYodGhpcy5pc0xvYWRpbmcpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICksXG5cbiAgICAgICAgICAgICQuc3Bhbih7cmVmOiAnc2VhcmNoZWRDb3VudCcsIGNsYXNzTmFtZTogJ3NlYXJjaGVkLWNvdW50J30sXG4gICAgICAgICAgICAgICcwJ1xuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICQuc3Bhbih7fSwgJyBwYXRocyBzZWFyY2hlZCcpXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApLFxuXG4gICAgICAkLnVsKFxuICAgICAgICB7XG4gICAgICAgICAgcmVmOiAnZXJyb3JMaXN0JyxcbiAgICAgICAgICBjbGFzc05hbWU6ICdlcnJvci1saXN0IGxpc3QtZ3JvdXAgcGFkZGVkJyxcbiAgICAgICAgICBzdHlsZTogc2hvd0lmKHRoaXMuc2VhcmNoRXJyb3JzLmxlbmd0aCA+IDApXG4gICAgICAgIH0sXG5cbiAgICAgICAgLi4udGhpcy5zZWFyY2hFcnJvcnMubWFwKG1lc3NhZ2UgPT4gKFxuICAgICAgICAgICQubGkoeyBjbGFzc05hbWU6ICd0ZXh0LWVycm9yJyB9LCBlc2NhcGVIdG1sKG1lc3NhZ2UpKVxuICAgICAgICApKVxuICAgICAgKSxcblxuICAgICAgZXRjaC5kb20oXG4gICAgICAgIFJlc3VsdHNWaWV3LFxuICAgICAgICB7IHJlZjogJ3Jlc3VsdHNWaWV3JywgbW9kZWw6IHRoaXMubW9kZWwgfVxuICAgICAgKSxcblxuICAgICAgJC51bChcbiAgICAgICAge1xuICAgICAgICAgIGNsYXNzTmFtZTogJ2NlbnRlcmVkIGJhY2tncm91bmQtbWVzc2FnZSBuby1yZXN1bHRzLW92ZXJsYXknLFxuICAgICAgICAgIHN0eWxlOiBzaG93SWYobWF0Y2hDb3VudCA9PT0gMClcbiAgICAgICAgfSxcbiAgICAgICAgJC5saSh7fSwgJ05vIHJlc3VsdHMnKVxuICAgICAgKVxuICAgICk7XG4gIH1cblxuICBjb3B5KCkge1xuICAgIHJldHVybiBuZXcgUmVzdWx0c1BhbmVWaWV3KCk7XG4gIH1cblxuICBnZXRUaXRsZSgpIHtcbiAgICByZXR1cm4gJ0ZpbmQgUmVmZXJlbmNlcyBSZXN1bHRzJztcbiAgfVxuXG4gIGdldEljb25OYW1lKCkge1xuICAgIHJldHVybiAnc2VhcmNoJztcbiAgfVxuXG4gIGdldFVSSSgpIHtcbiAgICByZXR1cm4gUmVzdWx0c1BhbmVWaWV3LlVSSTtcbiAgfVxuXG4gIGZvY3VzKCkge1xuICAgIHRoaXMucmVmcy5yZXN1bHRzVmlldz8uZWxlbWVudC5mb2N1cygpO1xuICB9XG5cblxuXG59XG4iXX0=